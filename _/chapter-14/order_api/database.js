// Our primary interface for the MongoDB instancevar MongoClient = require('mongodb').MongoClient;// Used in order verify correct return valuesvar assert = require('assert');/** * * @param databaseName - name of the database we are connecting to * @param callBack - callback to execute when connection finishes */var connect = function (databaseName, callBack) {    // URL to the MongoDB instance we are connecting to    var url = 'mongodb://localhost:27017/' + databaseName;    // Connect to our MongoDB instance, retrieve the selected    // database, and execute a callback on it.    MongoClient.connect(url,        // Callback method        function (error, database) {            // Make sure that no error was thrown            assert.equal(null, error);            console.log("Succesfully connected to MongoDB instance!");            callBack(database);        });};/** * Executes the find() method of the target collection in the * target database, optionally with a query. * @param databaseName - name of the database * @param collectionName - name of the collection * @param query - optional query parameters for find() */exports.find = function (databaseName, collectionName, query, cb) {    connect(databaseName, function (database) {        // The collection we want to find documents from        var collection = database.collection(collectionName);        // Search the given collection in the given database for        // all documents which match the criteria, convert them to        // an array, and finally execute a callback on them.        collection.find(query).toArray(            // Callback method            function (err, documents) {                // If something went wrong, execute callback with the error                if (err) {                    cb(err, null);                } else {                    // Make sure nothing went wrong                    assert.equal(err, null);                    // Print all the documents which we found, if any                    console.log("MongoDB returned the following documents:", documents);                    // Close the database connection to free resources                    database.close();                    // Execute the callback on the result                    cb(null, documents);                }            })    })};